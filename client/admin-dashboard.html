<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - FilmyMela</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="shortcut icon" href="./assets/logo.png" type="image/x-icon" />

    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        background-color: #1a1a1a;
        color: white;
        font-family: Arial, sans-serif;
        line-height: 1.6;
      }

      .admin-header {
        padding: 20px;
        background-color: #2c2c2c;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 10px;
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .admin-content {
        padding: 20px;
        max-width: 100%;
        overflow-x: auto;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background-color: #2c2c2c;
      }

      th,
      td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #444;
      }

      th {
        background-color: #333;
      }

      tr:hover {
        background-color: #383838;
      }

      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
      }

      .modal-content {
        background-color: #1a1a1a;
        margin: 20px auto;
        width: 90%;
        max-width: 800px;
        max-height: 90vh;
        border-radius: 8px;
        position: relative;
        display: flex;
        flex-direction: column;
      }

      .modal-header {
        padding: 20px;
        border-bottom: 1px solid #444;
        position: sticky;
        top: 0;
        background-color: #1a1a1a;
        border-radius: 8px 8px 0 0;
        z-index: 1;
      }

      .modal-body {
        padding: 20px;
        overflow-y: auto;
        max-height: calc(90vh - 140px);
      }

      .modal-footer {
        padding: 20px;
        border-top: 1px solid #444;
        position: sticky;
        bottom: 0;
        background-color: #1a1a1a;
        border-radius: 0 0 8px 8px;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
      }

      .close {
        position: absolute;
        right: 20px;
        top: 20px;
        color: #aaa;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: #ddd;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #444;
        background-color: #333;
        color: white;
        border-radius: 4px;
        font-size: 16px;
      }

      .form-group textarea {
        resize: vertical;
        min-height: 100px;
      }

      .screenshot-list,
      .download-links-list {
        background-color: #2c2c2c;
        border-radius: 4px;
        padding: 15px;
        margin-top: 10px;
      }

      .screenshot-item,
      .download-link-item {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
        flex-wrap: wrap;
      }

      .screenshot-item input,
      .download-link-item input {
        flex: 1;
        min-width: 200px;
      }

      .action-btn,
      .add-more-btn {
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        transition: background-color 0.3s;
      }

      .edit-btn {
        background-color: #4caf50;
        color: white;
      }

      .delete-btn {
        background-color: #f44336;
        color: white;
      }

      .add-more-btn {
        background-color: #2196f3;
        color: white;
        margin-top: 10px;
      }

      .action-btn:hover,
      .add-more-btn:hover {
        opacity: 0.9;
      }

      /* Responsive Design */
      @media screen and (max-width: 768px) {
        .admin-header {
          flex-direction: column;
          text-align: center;
        }

        .admin-header button {
          width: 100%;
          margin: 5px 0;
        }

        .modal-content {
          width: 95%;
          margin: 10px auto;
        }

        .screenshot-item,
        .download-link-item {
          flex-direction: column;
        }

        .screenshot-item input,
        .download-link-item input {
          width: 100%;
        }

        table {
          font-size: 14px;
        }

        th,
        td {
          padding: 8px;
        }

        .action-btn {
          padding: 8px 16px;
          font-size: 12px;
        }
      }

      @media screen and (max-width: 480px) {
        .modal-content {
          margin: 5px;
          width: calc(100% - 10px);
        }

        .modal-body {
          padding: 10px;
        }

        .form-group {
          margin-bottom: 15px;
        }

        .form-group label {
          font-size: 14px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          font-size: 14px;
          padding: 8px;
        }
      }
    </style>
  </head>
  <body>
    <div class="admin-header">
      <h1>Admin Dashboard</h1>
      <div>
        <button onclick="openMovieModal()" class="action-btn edit-btn">
          Add New Movie
        </button>
        <button onclick="logout()" class="action-btn delete-btn">Logout</button>
      </div>
    </div>

    <div class="admin-content">
      <table>
        <thead>
          <tr>
            <th>Poster</th>
            <th>Title</th>
            <th>Year</th>
            <th>Category</th>
            <th>Rating</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="movieTableBody">
          <!-- Movies will be loaded here -->
        </tbody>
      </table>
    </div>

    <!-- Movie Modal -->
    <div id="movieModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">Add New Movie</h2>
          <span class="close" onclick="closeMovieModal()">&times;</span>
        </div>
        <div class="modal-body">
          <form id="movieForm">
            <div class="form-group">
              <label for="title">Title</label>
              <input type="text" id="title" name="title" required />
            </div>
            <div class="form-group">
              <label for="year">Year</label>
              <input type="number" id="year" name="year" required />
            </div>

            <!-- Category Selection Section -->
            <div class="form-group">
              <label>Categories</label>
              <div id="categoryList" class="screenshot-list">
                <div class="screenshot-item">
                  <input
                    type="text"
                    name="categories[]"
                    placeholder="Industry (eg:Bollywood,Hollywood)"
                  />
                </div>
              </div>
              <button
                type="button"
                class="add-more-btn"
                onclick="addCategoryField()"
              >
                Add Categories
              </button>
            </div>

            <div class="form-group">
              <label for="rating">Rating</label>
              <input
                type="number"
                id="rating"
                name="rating"
                step="0.1"
                min="0"
                max="10"
              />
            </div>
            <div class="form-group">
              <label for="description">Description</label>
              <textarea id="description"  name="description" rows="4"></textarea>
            </div>
            <div class="form-group">
              <label for="posterUrl">Poster URL</label>
              <input type="url" id="posterUrl" name="posterUrl" required />
            </div>

            <div class="form-group">
              <label for="WatchUrl">WatchOnline</label>
              <input type="url" id="WatchUrl" name="WatchUrl" />
            </div>

            <!-- Screenshots Section -->
            <div class="form-group">
              <label>Screenshots</label>
              <div id="screenshotsList" class="screenshot-list">
                <div class="screenshot-item">
                  <input
                    type="url"
                    name="screenshots[]"
                    placeholder="Screenshot URL"
                  />
                </div>
              </div>
              <button
                type="button"
                class="add-more-btn"
                onclick="addScreenshotField()"
              >
                Add Screenshot
              </button>
            </div>

            <!-- Download Links Section -->
            <div class="form-group">
              <label>Download Links</label>
              <div id="downloadLinksList" class="download-links-list">
                <div class="download-link-item">
                  <input
                    type="text"
                    name="qualities[]"
                    placeholder="Quality (e.g., 1080p)"
                  />
                  <input
                    type="url"
                    name="downloadLinks[]"
                    placeholder="Download Link"
                  />
                </div>
              </div>
              <button
                type="button"
                class="add-more-btn"
                onclick="addDownloadLinkField()"
              >
                Add Download Link
              </button>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="action-btn delete-btn"
            onclick="closeMovieModal()"
          >
            Cancel
          </button>
          <button type="submit" form="movieForm" class="action-btn edit-btn">
            Save Movie
          </button>
        </div>
      </div>
    </div>

    <script src="js/admin.js"></script>
  </body>
</html>
